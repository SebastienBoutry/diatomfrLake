<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2 - Importation et mise en format tableau des données • diatomfrlake</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="2 - Importation et mise en format tableau des données">
<meta property="og:description" content="diatomfrlake">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">diatomfrlake</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/1_install.html">1 - Installation Diatom French lake</a>
    </li>
    <li>
      <a href="../articles/2_import.html">2 - Importation et mise en format tableau des données</a>
    </li>
    <li>
      <a href="../articles/3_table.html">3 - Mise en forme des données en tableur</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>2 - Importation et mise en format tableau des données</h1>
            
      
      
      <div class="hidden name"><code>2_import.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="les-données-du-formulaire-de-saisie">Les données du formulaire de saisie<a class="anchor" aria-label="anchor" href="#les-donn%C3%A9es-du-formulaire-de-saisie"></a>
</h2>
<p>L’équipe ECOVEA a fourni aux agents de terrain un format standard pour l’acquisition des donées numériques. Identique aux feuilles de terrain, le formulaire de saisie facilite la retranscription des informations.</p>
<p>Dans un même fichier, deux feuilles sont à remplir.</p>
<div class="section level3">
<h3 id="feuille-a-renseigner">Feuille : A renseigner<a class="anchor" aria-label="anchor" href="#feuille-a-renseigner"></a>
</h3>
<p>La feuille “A renseigner” recupère les coordonnées du prestataire de terrain et aussi sur la version du protocole d’échantillonnage utilisé.</p>
<div class="figure">
<img src="img/data_contact.png" width="700" alt=""><p class="caption">Capture d’écran de la feuille A renseigner</p>
</div>
<p>L’importation dans R de la feuille A renseigner se fait à l’aide de la fonction import_formulaire ou l’on présice l’argument sheet=2.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">""</span>, package <span class="op">=</span> <span class="st">"diatomfrlake"</span><span class="op">)</span>
<span class="va">sheet_2</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_formulaire.html">import_formulaire</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"Lunax_INRAE.xls"</span>,sheet<span class="op">=</span><span class="fl">2</span>,repertoire <span class="op">=</span> <span class="va">path</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sheet_2</span><span class="op">)</span>
<span class="co">#&gt;                                 X1 X2    X3   X4                        X5 X6</span>
<span class="co">#&gt; 1       Phytobenthos en plan d'eau NA  &lt;NA&gt; &lt;NA&gt;                      &lt;NA&gt; NA</span>
<span class="co">#&gt; 2                     Phytobenthos NA  &lt;NA&gt; &lt;NA&gt;                      &lt;NA&gt; NA</span>
<span class="co">#&gt; 3                   Renseignements NA  &lt;NA&gt; &lt;NA&gt;                      &lt;NA&gt; NA</span>
<span class="co">#&gt; 4                   Vos références NA  &lt;NA&gt; &lt;NA&gt;                      &lt;NA&gt; NA</span>
<span class="co">#&gt; 5              Nom de la société : NA INRAE &lt;NA&gt;                      &lt;NA&gt; NA</span>
<span class="co">#&gt; 6 Agence de l'eau correspondante : NA  &lt;NA&gt;   AG Code Sandre Intervenant : NA</span>
<span class="co">#&gt;   X7           X8         X9 X10 X11 X12 X13 X14 X15 X16 X17   ods</span>
<span class="co">#&gt; 1 NA           NA 2015-09-01  NA  NA  NA  NA  NA  NA  NA  NA FALSE</span>
<span class="co">#&gt; 2 NA           NA       &lt;NA&gt;  NA  NA  NA  NA  NA  NA  NA  NA FALSE</span>
<span class="co">#&gt; 3 NA           NA       &lt;NA&gt;  NA  NA  NA  NA  NA  NA  NA  NA FALSE</span>
<span class="co">#&gt; 4 NA           NA       &lt;NA&gt;  NA  NA  NA  NA  NA  NA  NA  NA FALSE</span>
<span class="co">#&gt; 5 NA           NA       &lt;NA&gt;  NA  NA  NA  NA  NA  NA  NA  NA FALSE</span>
<span class="co">#&gt; 6 NA 2.323232e+12       &lt;NA&gt;  NA  NA  NA  NA  NA  NA  NA  NA FALSE</span>
<span class="fu"><a href="../reference/formatting_contact.html">formatting_contact</a></span><span class="op">(</span><span class="va">sheet_2</span><span class="op">)</span>
<span class="co">#&gt;   sandre_intervenant agence_commanditaire                     email    num_tel</span>
<span class="co">#&gt; 1      2323232232253                   AG sebastien.boutry@inrae.fr 0000000000</span>
<span class="co">#&gt;   organisme</span>
<span class="co">#&gt; 1     INRAE</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="feuille-données-générales">Feuille : Données générales<a class="anchor" aria-label="anchor" href="#feuille-donn%C3%A9es-g%C3%A9n%C3%A9rales"></a>
</h3>
<p>Cette feuille se sépare en plusieurs parties informations générales sur la station, sur le prélevement, la physico-chimie de l’eau et des données complémentaires sur la station.</p>
<div class="figure">
<img src="img/data_mesologique.png" width="700" alt=""><p class="caption">Capture d’écran d’une partie la feuille Données générales</p>
</div>
<p>L’importation dans R de la feuille “Données générales” se fait à l’aide de la fonction import_formulaire ou l’on présice l’argument sheet=3.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">diatomfrlake</span><span class="op">)</span>
<span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">""</span>, package <span class="op">=</span> <span class="st">"diatomfrlake"</span><span class="op">)</span>
<span class="va">sheet_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_formulaire.html">import_formulaire</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"Lunax_INRAE.xls"</span>,sheet<span class="op">=</span><span class="fl">3</span>,repertoire <span class="op">=</span> <span class="va">path</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sheet_3</span><span class="op">)</span>
<span class="co">#&gt;                            X1 X2                  X3 X4 X5</span>
<span class="co">#&gt; 1  Phytobenthos en plan d'eau                             </span>
<span class="co">#&gt; 2                Phytobenthos                             </span>
<span class="co">#&gt; 3           Données générales                             </span>
<span class="co">#&gt; 4      Informations générales                             </span>
<span class="co">#&gt; 5 Département du plan d'eau :                        32   </span>
<span class="co">#&gt; 6         Nom du plan d'eau :    Lunax (barrage de )      </span>
<span class="co">#&gt;                               X6 X7 X8    X9 X10 X11 X12 X13 X14 X15 X16 X17</span>
<span class="co">#&gt; 1                                      42339                                </span>
<span class="co">#&gt; 2                                                                           </span>
<span class="co">#&gt; 3                                                                           </span>
<span class="co">#&gt; 4                                                                           </span>
<span class="co">#&gt; 5           Code du plan d'eau :    NA                                      </span>
<span class="co">#&gt; 6 Numéro d'unité d'observation :           1                                </span>
<span class="co">#&gt;   X18 X19 X20 encoding   ods</span>
<span class="co">#&gt; 1                UTF-8 FALSE</span>
<span class="co">#&gt; 2                UTF-8 FALSE</span>
<span class="co">#&gt; 3                UTF-8 FALSE</span>
<span class="co">#&gt; 4                UTF-8 FALSE</span>
<span class="co">#&gt; 5                UTF-8 FALSE</span>
<span class="co">#&gt; 6                UTF-8 FALSE</span>
<span class="va">sheet_3</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/formatting_data.html">formatting_data</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt;   logiciel version departement              nom_pe organisme operateur</span>
<span class="co">#&gt; 1    FALSE 12-2015          32 Lunax (barrage de )     INRAE S. BOUTRY</span>
<span class="co">#&gt;   coord_hors_uo_macro    substrat_dur prof_max_dur</span>
<span class="co">#&gt; 1                 Non Pierres, galets          0.5</span>
<span class="co">#&gt;                             num_omnidia_dur substrat_veg prof_max_veg</span>
<span class="co">#&gt; 1 2016001101*22/04/2020*AEAG*LUNAX*UO1*****                          </span>
<span class="co">#&gt;   num_omnidia_veg temperature o2_dissous cond impact_humains dist_rive</span>
<span class="co">#&gt; 1                        22.2        8.6  255            Oui         1</span>
<span class="co">#&gt;   disque_secchi coord_x num_uo       date type_dominant        colmatage</span>
<span class="co">#&gt; 1           5.5  923548      1 2020-04-22             4 pas de colmatage</span>
<span class="co">#&gt;   nbr_tiges  ph transparence_secchi code_pe sat_o2 coord_y nom_photo</span>
<span class="co">#&gt; 1           8.5                  NA      NA  108.8 6607621          </span>
<span class="co">#&gt;   commentaires nom_latin</span>
<span class="co">#&gt; 1</span></code></pre></div>
<p>Dans la page suivante, l’utilisation des fonctions <em>formatting_contact()</em> et <em>formatting_data()</em> seront présentés pour une mise en forme de tableau</p>
</div>
</div>
<div class="section level2">
<h2 id="la-liste-floristique-fichier--prn">La liste floristique fichier .prn<a class="anchor" aria-label="anchor" href="#la-liste-floristique-fichier--prn"></a>
</h2>
<p>Le format .prn provient du logiciel Omnidia <span class="citation">(Lecointe, Coste, and Prygiel 1993)</span> qui permet de mettre en forme une liste floristique diatomique. Ce logiciel intègre une base de données taxonomique des diatomées mise à jour par Michel Coste.</p>
<p>Le fichier .prn est constitué de trois colonnes séparés par une tabulation. La première colonne est seulement rempli pour la première ligne de la liste floristique. Elle renseigne le numéro de la lame et les informations complémentaires sur la station et l’établissement de cette liste floristique. Les informations sont séparés par des étoiles (*) et doit contenir 9 étoiles.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">""</span>, package <span class="op">=</span> <span class="st">"diatomfrlake"</span><span class="op">)</span>
<span class="va">flore</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/read_prn.html">read_prn</a></span><span class="op">(</span>file <span class="op">=</span><span class="st">"3723.prn"</span>,repertoire<span class="op">=</span><span class="va">path</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">flore</span><span class="op">)</span>
<span class="co">#&gt;                                          V1   V2  V3  fichier</span>
<span class="co">#&gt; 1 2016001101*22/04/2020*AEAG*LUNAX*UO1***** ADMI  90 3723.prn</span>
<span class="co">#&gt; 2                                           PSBR 110 3723.prn</span>
<span class="co">#&gt; 3                                           PULA   4 3723.prn</span>
<span class="co">#&gt; 4                                           PRBS   1 3723.prn</span>
<span class="co">#&gt; 5                                           GOMP   9 3723.prn</span>
<span class="co">#&gt; 6                                           SLPP   2 3723.prn</span>
<span class="fu"><a href="../reference/formatting_flore.html">formatting_flore</a></span><span class="op">(</span><span class="va">flore</span><span class="op">)</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 43 × 4</span></span>
<span class="co">#&gt;    id                                        taxons    ab fichier </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** ADMI      90 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** ADSB       4 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** ALFF       1 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** BNEG       6 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** BRAC       1 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** CAFM       1 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** CCOS       1 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** CCYM       1 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** CKPP       2 3723.prn</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2016001101*22/04/2020*AEAG*LUNAX*UO1***** COCO       2 3723.prn</span>
<span class="co">#&gt; <span style="color: #949494;"># … with 33 more rows</span></span></code></pre></div>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="références">Références:<a class="anchor" aria-label="anchor" href="#r%C3%A9f%C3%A9rences"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Lecointe1993" class="csl-entry">
Lecointe, C., M. Coste, and J. Prygiel. 1993. <span>“<span>‘Omnidia’</span>: Software for Taxonomy, Calculation of Diatom Indices and Inventories Management.”</span> <em>Hydrobiologia</em> 269 (1): 509–13. <a href="https://doi.org/10.1007/BF00028048" class="external-link">https://doi.org/10.1007/BF00028048</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Sebastien Boutry.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
